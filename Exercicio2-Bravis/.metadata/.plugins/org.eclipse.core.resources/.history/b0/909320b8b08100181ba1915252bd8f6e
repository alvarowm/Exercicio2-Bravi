package br.bravi.exercicio1;

import org.junit.Test;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertFalse;

import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.HttpClientBuilder;
import org.apache.http.util.EntityUtils;

public class ApplicationTest {

	static final String LOCALHOST_8080_PERSON_1 = "http://localhost:8080/person/1";
	static final String LOCALHOST_8080_PERSON = "http://localhost:8080/person/";
	static final String POST = "{\"name\":\"Teste\",\"contatcs\":[{\"contactType\":\"Zap\",\"contact\":\"123546\"}]}";
	static final String APPLICATION_JSON = "application/json";

	@Test
	public void testInsercao() {
		HttpPost request = new HttpPost(LOCALHOST_8080_PERSON);
		StringEntity params;
		try {
			params = new StringEntity(POST);

			request.addHeader("content-type", APPLICATION_JSON);
			request.setEntity(params);

			HttpResponse httpResponse = HttpClientBuilder.create().build().execute(request);
			assertEquals(httpResponse.getStatusLine().getStatusCode(), 201);
		} catch (Exception e) {
			assertFalse(true);
		}

	}

	@Test
	public void testFindByID() {

	}

}
